version: 1
frontend:
  phases:
    preBuild:
      commands:
        - nvm use 20
        - npm ci
    build:
      commands:
        - npm run build
        - echo "✅ Build completed successfully"
        - echo "📁 Checking generated files:"
        - ls -la dist/
        - echo "📄 Verifying main files exist:"
        - test -f dist/index.html && echo "✅ index.html found" || echo "❌ index.html missing"
        - test -f dist/main.js && echo "✅ main.js found" || echo "❌ main.js missing"
        - test -f dist/styles.css && echo "✅ styles.css found" || echo "⚠️ styles.css not found (may be inline)"
  artifacts:
    baseDirectory: dist
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*